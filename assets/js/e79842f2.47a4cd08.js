"use strict";(self.webpackChunkxcpdoc=self.webpackChunkxcpdoc||[]).push([[10],{9759:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>l,frontMatter:()=>r,metadata:()=>a,toc:()=>o});var n=s(4848),i=s(8453);const r={},d="Fair Minting",a={id:"advanced/specifications/fairminter",title:"Fair Minting",description:"Fair Minting is a process whereby users are able to \u201cmint\u201d tokens in a decentralized manner. One user initiates the mint (either with or without a \u201cpremint\u201d), and then other users are able to trigger it to create tokens for themselves. Fair Minting was likely inspired by the original Counterparty Proof-of-Burn mechanism, by which users sent BTC to an unspendable address and XCP tokens were generate for them automatically.",source:"@site/docs/advanced/specifications/fairminter.md",sourceDirName:"advanced/specifications",slug:"/advanced/specifications/fairminter",permalink:"/docs/advanced/specifications/fairminter",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/advanced/specifications/fairminter.md",tags:[],version:"current",frontMatter:{},sidebar:"advanced",previous:{title:"Require Dispenser to be Source Address",permalink:"/docs/advanced/specifications/dispenser-must-be-created-by-source"},next:{title:"Be Able to Lock Descriptions",permalink:"/docs/advanced/specifications/lockable-issuance-descriptions"}},c={},o=[{value:"Function Signatures",id:"function-signatures",level:2},{value:"API Changes",id:"api-changes",level:2},{value:"Database Changes",id:"database-changes",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"fair-minting",children:"Fair Minting"}),"\n",(0,n.jsx)(t.h1,{id:"motivation",children:"Motivation"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Fair Minting"})," is a process whereby users are able to \u201cmint\u201d tokens in a decentralized manner. One user initiates the mint (either with or without a \u201cpremint\u201d), and then other users are able to trigger it to create tokens for themselves. Fair Minting was likely inspired by the original Counterparty ",(0,n.jsx)(t.strong,{children:"Proof-of-Burn"})," mechanism, by which users sent BTC to an unspendable address and XCP tokens were generate for them automatically."]}),"\n",(0,n.jsxs)(t.p,{children:["More recently, ",(0,n.jsx)(t.strong,{children:"BRC-20"}),' introduced a variant of the Fair Mint model that has been adopted by many fungible token protocols recently, including SRC-20 on Bitcoin Stamps. In this system, users are able to mint "for free" by paying only a miner fee: the term \u201cfair mint\u201d refers to the fact that the creator of the minting system is not enriched in the process, and that the minting process is decentralized']}),"\n",(0,n.jsxs)(t.p,{children:["In 2023, Joe Looney introduced the ",(0,n.jsxs)(t.a,{href:"https://xcp20.wtf/",children:[(0,n.jsx)(t.strong,{children:"\u201dXCP-20\u201d"})," Fair Mint model"]})," by setting up a ",(0,n.jsx)(t.strong,{children:"dispenser on a burn address; its name is"}),"  a tongue-in-cheek reference to BRC-20. Buyers, largely unaware that Counterparty existed\u2014and this was not new in any way\u2014sent massive amounts of Bitcoin to the burn address and received tokens in return. In this way, tokens got distributed, but the deployer was not directly enriched."]}),"\n",(0,n.jsx)(t.h1,{id:"design",children:"Design"}),"\n",(0,n.jsx)(t.p,{children:"It\u2019s desirable to create a native mechanism for Fair Minting so that a burn address isn\u2019t used. In the process, it is also natural to allow for multiple modes of operation that extend the Fair Mint model:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Miner Fees Only, with a Max Mint per Transaction"}),"\n",(0,n.jsx)(t.li,{children:"XCP Fee with a Price per Unit Token (Distributed to Issuer)"}),"\n",(0,n.jsx)(t.li,{children:"XCP Fee with a Price per Unit (Burned)"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Additional functionality may be added as well:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["A \u201csoft cap\u201d mechanism, establishing a minimum amount of the token to be issued, optionally by a particular block height. (Before ",(0,n.jsx)(t.code,{children:"soft_cap_deadline_block"})," payment will be escrowed trustlessly.)"]}),"\n",(0,n.jsx)(t.li,{children:"A commission in the new token sent to the creator of the mint for each mint operation (proportional to the quantity minted)"}),"\n",(0,n.jsx)(t.li,{children:"A \u201cStart Block\u201d and \u201cEnd Block\u201d"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Implementation Notes:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Fair Mints will be possible by issuers of extant assets as long as those assets do not have locked quantities."}),"\n",(0,n.jsxs)(t.li,{children:["The ",(0,n.jsx)(t.code,{children:"premint"})," quantity will be credited to the issuer at the ",(0,n.jsx)(t.code,{children:"start_block"}),"."]}),"\n",(0,n.jsx)(t.li,{children:"If an asset can be reset it can also be Fair Minted, but fair minting itself would not first effect an asset reset."}),"\n",(0,n.jsxs)(t.li,{children:["Outside the fair minting period the ",(0,n.jsx)(t.code,{children:"hard_cap"})," has no effect. To lock the quantity you have to use the parameter ",(0,n.jsx)(t.code,{children:"lock_quantity=true"})," or use an issuance after the minting period."]}),"\n",(0,n.jsx)(t.li,{children:"For the duration of the mint period, the state of description lock and quantity lock cannot be changed."}),"\n"]}),"\n",(0,n.jsx)(t.h1,{id:"implementation",children:"Implementation"}),"\n",(0,n.jsxs)(t.p,{children:["It would be possible, to use the ",(0,n.jsx)(t.code,{children:"issuances.py"})," contract and add the fair minting implementation to it. However, this contract is already 1000 lines long and it is preferable not to add complexity to it. New contracts will therefore be implemented but, to ensure maximum compatibility with other assets, the ",(0,n.jsx)(t.code,{children:"issuances"})," and ",(0,n.jsx)(t.code,{children:"assets"})," tables will be used: the creation of a fair minting will result in the creation of a line in the ",(0,n.jsx)(t.code,{children:"assets"})," and ",(0,n.jsx)(t.code,{children:"issuances"})," tables and then each fair mining will result in the creation of a line in the ",(0,n.jsx)(t.code,{children:"issuances"})," table."]}),"\n",(0,n.jsxs)(t.p,{children:["There will be two new contracts: ",(0,n.jsx)(t.code,{children:"fairminter.py"})," and ",(0,n.jsx)(t.code,{children:"fairmint.py"}),". These two contracts will respect the usual interface of all other contracts, that is to say the functions ",(0,n.jsx)(t.code,{children:"initialise()"}),", ",(0,n.jsx)(t.code,{children:"validate()"}),", ",(0,n.jsx)(t.code,{children:"compose()"}),", ",(0,n.jsx)(t.code,{children:"unpack()"})," and ",(0,n.jsx)(t.code,{children:"parse()"}),'. The first will allow the creation of a "mintable" asset and the second will allow users to "mint" this asset. After the minting period, a minted asset functions just like a locked issuance asset.']}),"\n",(0,n.jsx)(t.h2,{id:"function-signatures",children:"Function Signatures"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.code,{children:"compose_fairminter"})}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Argument Name"}),(0,n.jsx)(t.th,{children:"Type"}),(0,n.jsx)(t.th,{children:"Defaut"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"address"}),(0,n.jsx)(t.td,{children:"str"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"The address with which the transaction is signed and which is the issuer of the mined asset. This address receives the pre-minted assets, payments, and fees."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"asset"}),(0,n.jsx)(t.td,{children:"str"}),(0,n.jsx)(t.td,{}),(0,n.jsxs)(t.td,{children:["The name of the asset to be mined. If the asset doesn't exist, it is created. If it exists, it must belong to the issuer (",(0,n.jsx)(t.code,{children:"address"}),") and not be locked. In any case, the ",(0,n.jsx)(t.code,{children:"issuances"})," are locked for the asset as long as the fair minter is open."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"asset_parent"}),(0,n.jsx)(t.td,{children:"str"}),(0,n.jsx)(t.td,{children:"\u201c\u201d"}),(0,n.jsxs)(t.td,{children:["The name of the parent asset. The asset must exist and belong to the issuer (",(0,n.jsx)(t.code,{children:"address"}),"). If ",(0,n.jsx)(t.code,{children:"<asset_parent>.<asset>"})," doesn't exist, a new numeric asset with a random name is created. If ",(0,n.jsx)(t.code,{children:"<asset_parent>.<asset>"})," exists, it must belong to the issuer (",(0,n.jsx)(t.code,{children:"address"}),") and not be locked."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"price"}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsxs)(t.td,{children:["The price for the ",(0,n.jsx)(t.code,{children:"quantity_by_price"})," units of the created asset in XCP-satoshis."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"quantity_by_price"}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"1"}),(0,n.jsxs)(t.td,{children:["The amount of assets received by the miner for the price specified with the ",(0,n.jsx)(t.code,{children:"price"})," argument."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"max_mint_per_tx"}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsxs)(t.td,{children:["If ",(0,n.jsx)(t.code,{children:"price"})," is different from 0, ",(0,n.jsx)(t.code,{children:"max_mint_per_tx"})," designates the maximum quantity a user can mine with one transaction. If ",(0,n.jsx)(t.code,{children:"price"})," is equal to 0, it designates the quantity the user receives with each transaction."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"hard_cap"}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsxs)(t.td,{children:["The maximum number of assets that must not be exceeded by the fair minter. Any assets created before the fair minter opens are taken into account when verifying the ",(0,n.jsx)(t.code,{children:"hard_cap"}),"."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"premint_quantity"}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsxs)(t.td,{children:["The quantity of assets to be mined at the creation of the fair minter. The pre-mined assets are sent to the issuer (",(0,n.jsx)(t.code,{children:"address"}),"). If a ",(0,n.jsx)(t.code,{children:"start_block"})," and/or a ",(0,n.jsx)(t.code,{children:"soft_cap"})," are defined, the pre-mined assets are escrowed until they are reached."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"start_block"}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsx)(t.td,{children:"The block from which users can mine assets. If equal to 0, the fair minter is available immediately after its creation."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"end_block"}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsxs)(t.td,{children:["The block until which users can mine assets. If equal to 0, the fair minter is only closed if a ",(0,n.jsx)(t.code,{children:"soft_cap"})," is defined and not reached, or if a ",(0,n.jsx)(t.code,{children:"hard_cap"})," is defined and reached."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"soft_cap"}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsx)(t.td,{children:"The block until which users can mine assets. If equal to 0, the fair minter is only closed if a soft_cap is defined and not reached, or if a hard_cap is defined and reached. The soft_cap defines the minimum quantity of assets that must be mined, before soft_cap_deadline_block, for the fair minter not to be canceled and closed. Any assets created before the fair minter opens and premint_quantity are not taken into account when verifying the soft cap. As long as the soft cap is not reached, the mined assets, payments, and fees are escrowed. When the soft cap is reached, the assets are sent to the miners, the payments and fees to the issuer (address). If it is not reached, the payments are refunded, the assets destroyed, and the fair minter is closed."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"soft_cap_deadline_block"}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsxs)(t.td,{children:["The block before which the ",(0,n.jsx)(t.code,{children:"soft_cap"})," must be reached (see ",(0,n.jsx)(t.code,{children:"soft_cap"}),")."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"minted_asset_commission"}),(0,n.jsx)(t.td,{children:"float"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsx)(t.td,{children:"Commission to be paid in minted asset, a fraction of 1 (i.e., 0.05 is five percent); the commission is deducted from the asset received by the minter and sent to the Fair Minter owner. If a soft cap is defined, the commissions are escrowed until it is reached."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"burn_payment"}),(0,n.jsx)(t.td,{children:"bool"}),(0,n.jsx)(t.td,{children:"False"}),(0,n.jsx)(t.td,{children:"This parameter allows for the destruction of XCP used to pay for the assets. If a soft cap is defined, the XCP are only destroyed if it is reached; otherwise, they are refunded."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"lock_description"}),(0,n.jsx)(t.td,{children:"bool"}),(0,n.jsx)(t.td,{children:"False"}),(0,n.jsxs)(t.td,{children:["Allows locking the asset description. This operation can also be performed with an ",(0,n.jsx)(t.code,{children:"issuance"})," once the fair minter is closed."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"lock_quantity"}),(0,n.jsx)(t.td,{children:"bool"}),(0,n.jsx)(t.td,{children:"False"}),(0,n.jsxs)(t.td,{children:["Allows locking the asset. This operation can also be performed with an ",(0,n.jsx)(t.code,{children:"issuance"})," once the fair minter is closed."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"divisible"}),(0,n.jsx)(t.td,{children:"bool"}),(0,n.jsx)(t.td,{children:"True"}),(0,n.jsx)(t.td,{children:"Indicates whether the asset is divisible or not."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"description"}),(0,n.jsx)(t.td,{children:"str"}),(0,n.jsx)(t.td,{children:"\u201c\u201d"}),(0,n.jsx)(t.td,{children:"The description of the asset."})]})]})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.code,{children:"compose_fairmint"})}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Argument Name"}),(0,n.jsx)(t.th,{children:"Type"}),(0,n.jsx)(t.th,{children:"Defaut"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"address"}),(0,n.jsx)(t.td,{children:"str"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"The address with which the transaction is signed and which receives the minted assets."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"asset"}),(0,n.jsx)(t.td,{children:"str"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"The name of the asset to be mined."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"quantity"}),(0,n.jsx)(t.td,{children:"int"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsxs)(t.td,{children:["The quantity of assets to mine. If the asset price is greater than 0, ",(0,n.jsx)(t.code,{children:"quantity"})," must also be greater than 0, otherwise the mined quantity will in all cases be equal to the fair minter's ",(0,n.jsx)(t.code,{children:"mint_per_tx"}),"."]})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"api-changes",children:"API Changes"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["New Routes","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Get All Fair Minters: ",(0,n.jsx)(t.code,{children:"/v2/fairminters"})]}),"\n",(0,n.jsxs)(t.li,{children:["Get Fair Minter By Tx Hash: ",(0,n.jsx)(t.code,{children:"/v2/fairminters/<tx_hash>"})]}),"\n",(0,n.jsxs)(t.li,{children:["Get Fair Minter By Asset: ",(0,n.jsx)(t.code,{children:"/v2/assets/<asset>/fairminter"})]}),"\n",(0,n.jsxs)(t.li,{children:["Get Fair Minters By Address: ",(0,n.jsx)(t.code,{children:"/v2/addresses/<address>/fairminters"})]}),"\n",(0,n.jsxs)(t.li,{children:["Get Mints By Fair Minter: ",(0,n.jsx)(t.code,{children:"/v2/fairminters/<tx_hash>/mints"})]}),"\n",(0,n.jsxs)(t.li,{children:["Get Mints By Asset: ",(0,n.jsx)(t.code,{children:"/v2/assets/<asset>/mints"})]}),"\n",(0,n.jsxs)(t.li,{children:["Get Mints By Address: ",(0,n.jsx)(t.code,{children:"/v2/addresses/<address>/mints"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"database-changes",children:"Database Changes"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["A",(0,n.jsx)(t.code,{children:"fair_minting"})," field will be added to the ",(0,n.jsx)(t.code,{children:"issuances"})," table. This is the field that will be checked to prevent token issuance other than through fair minting."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["A new table ",(0,n.jsx)(t.code,{children:"fairminters"})," will be created with the following fields:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sql",children:"tx_hash TEXT, -- Fair Minter identifier\ntx_index INTEGER,\nblock_index INTEGER,\nsource TEXT,\nasset TEXT,\nasset_parent TEXT,\nasset_longname TEXT,\ndescription TEXT,\nprice INTEGER,\nquantity_by_price INTEGER,\nhard_cap INTEGER,\nburn_payment BOOL,\nmax_mint_per_tx INTEGER,\npremint_quantity INTEGER,\nstart_block INTEGER,\nend_block INTEGER,\nminted_asset_commission_int INTEGER,\nsoft_cap INTEGER,\nsoft_cap_deadline_block INTEGER,\nlock_description BOOL,\nlock_quantity BOOL,\ndivisible BOOL,\npre_minted BOOL DEFAULT 0,\nstatus TEXT -- pending, open, closed, invalid: <reasons>\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["A new table ",(0,n.jsx)(t.code,{children:"fairmints"})," will be created with the following fields:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sql",children:"tx_hash TEXT PRIMARY KEY, -- Mint identifier\ntx_index INTEGER,\nblock_index INTEGER,\nsource TEXT,\nfairminter_tx_hash TEXT,\nasset TEXT,\nearn_quantity INTEGER,\npaid_quantity INTEGER,\ncommission INTEGER,\nstatus TEXT -- valid, invalid: <reasons>\n"})}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["For each row in the ",(0,n.jsx)(t.code,{children:"fairminters"})," and ",(0,n.jsx)(t.code,{children:"fairmints"})," table a row will be added to the ",(0,n.jsx)(t.code,{children:"issuances"})," table."]})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>d,x:()=>a});var n=s(6540);const i={},r=n.createContext(i);function d(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);