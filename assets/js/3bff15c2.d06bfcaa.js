"use strict";(self.webpackChunkxcpdoc=self.webpackChunkxcpdoc||[]).push([[653],{7727:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>x,frontMatter:()=>r,metadata:()=>d,toc:()=>h});const d=JSON.parse('{"id":"advanced/specifications/bitcoin-data-storage-report","title":"Counterparty Data Encoding Methods","description":"There are four different methods for storing data on the Bitcoin blockchain: OPRETURN, MULTISIG, P2TR, and P2SH (deprecated). For small data (\u226464 bytes), OPRETURN is most efficient, while for larger data sizes, P2TR offers superior efficiency thanks to the witness discount. MULTISIG is impractical for large data storage due to its linear scaling with data size.","source":"@site/docs/advanced/specifications/bitcoin-data-storage-report.md","sourceDirName":"advanced/specifications","slug":"/advanced/specifications/bitcoin-data-storage-report","permalink":"/docs/advanced/specifications/bitcoin-data-storage-report","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/edit/master/website/docs/advanced/specifications/bitcoin-data-storage-report.md","tags":[],"version":"current","frontMatter":{},"sidebar":"advanced","previous":{"title":"Gas System","permalink":"/docs/advanced/specifications/gas-system"},"next":{"title":"Taproot Envelope","permalink":"/docs/advanced/specifications/taproot-envelope"}}');var s=t(4848),i=t(8453);const r={},c="Counterparty Data Encoding Methods",l={},h=[{value:"TLDR;",id:"tldr",level:2},{value:"Transaction Types and Data Storage Methods",id:"transaction-types-and-data-storage-methods",level:2},{value:"Transaction Size Comparison",id:"transaction-size-comparison",level:2},{value:"Efficiency Ratio (vBytes per byte of data)",id:"efficiency-ratio-vbytes-per-byte-of-data",level:2},{value:"Most Efficient Method by Data Size",id:"most-efficient-method-by-data-size",level:2}];function a(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"counterparty-data-encoding-methods",children:"Counterparty Data Encoding Methods"})}),"\n",(0,s.jsx)(n.p,{children:"There are four different methods for storing data on the Bitcoin blockchain: OP_RETURN, MULTISIG, P2TR, and P2SH (deprecated). For small data (\u226464 bytes), OP_RETURN is most efficient, while for larger data sizes, P2TR offers superior efficiency thanks to the witness discount. MULTISIG is impractical for large data storage due to its linear scaling with data size."}),"\n",(0,s.jsx)(n.h2,{id:"tldr",children:"TLDR;"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["For data \u226480 bytes, we use ",(0,s.jsx)(n.strong,{children:"OP_RETURN"}),", for simplicity."]}),"\n",(0,s.jsxs)(n.li,{children:["For data >64 bytes, ",(0,s.jsx)(n.strong,{children:"P2TR"})," is the most cost-effective."]}),"\n",(0,s.jsx)(n.li,{children:"P2TR is strictly superior to MULTISIG and P2SH at all transaction sizes."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"transaction-types-and-data-storage-methods",children:"Transaction Types and Data Storage Methods"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"LEGACY, OP_RETURN"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"One legacy input"}),"\n",(0,s.jsx)(n.li,{children:"One OP_RETURN output (containing data up to 80 bytes)"}),"\n",(0,s.jsx)(n.li,{children:"One legacy change output"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"Data storage method:"})," Direct insertion in OP_RETURN output"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"LEGACY, MULTISIG"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"One legacy input"}),"\n",(0,s.jsx)(n.li,{children:"N multisig outputs (1-of-3, storing 64 bytes per output)"}),"\n",(0,s.jsx)(n.li,{children:"One legacy change output"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"Data storage method:"})," Data embedded in multisig redeem scripts"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"BECH32, P2SH"})," (two transactions)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Transaction 1:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"One bech32 input"}),"\n",(0,s.jsx)(n.li,{children:"One P2SH output"}),"\n",(0,s.jsx)(n.li,{children:"One bech32 change output"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Transaction 2:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"One P2SH input"}),"\n",(0,s.jsx)(n.li,{children:"One OP_RETURN output"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"Data storage method:"})," Data embedded in P2SH scriptsig using ",(0,s.jsx)(n.code,{children:"OP_FALSE OP_IF <data> OP_ENDIF"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"BECH32, P2TR"})," (two transactions; deprecated)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Transaction 1:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"One bech32 input"}),"\n",(0,s.jsx)(n.li,{children:"One P2TR output"}),"\n",(0,s.jsx)(n.li,{children:"One bech32 change output"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Transaction 2:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"One P2TR input"}),"\n",(0,s.jsx)(n.li,{children:"One OP_RETURN output"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"Data storage method:"})," Ordinal-style inscription in witness data using ",(0,s.jsx)(n.code,{children:"OP_FALSE OP_IF <data> OP_ENDIF"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"transaction-size-comparison",children:"Transaction Size Comparison"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Size"}),(0,s.jsx)(n.th,{children:"OP_RETURN"}),(0,s.jsx)(n.th,{children:"MULTISIG"}),(0,s.jsx)(n.th,{children:"P2TR"}),(0,s.jsx)(n.th,{children:"P2SH"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Bytes      vBytes"}),(0,s.jsx)(n.td,{children:"Bytes      vBytes"}),(0,s.jsx)(n.td,{children:"Bytes      vBytes"}),(0,s.jsx)(n.td,{children:"Bytes      vBytes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"10"}),(0,s.jsx)(n.td,{children:"212        212"}),(0,s.jsx)(n.td,{children:"303        303"}),(0,s.jsx)(n.td,{children:"353        239"}),(0,s.jsx)(n.td,{children:"295        241"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"16"}),(0,s.jsx)(n.td,{children:"218        218"}),(0,s.jsx)(n.td,{children:"303        303"}),(0,s.jsx)(n.td,{children:"359        240"}),(0,s.jsx)(n.td,{children:"301        247"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"32"}),(0,s.jsx)(n.td,{children:"234        234"}),(0,s.jsx)(n.td,{children:"303        303"}),(0,s.jsx)(n.td,{children:"375        244"}),(0,s.jsx)(n.td,{children:"317        263"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"64"}),(0,s.jsx)(n.td,{children:"266        266"}),(0,s.jsx)(n.td,{children:"303        303"}),(0,s.jsx)(n.td,{children:"407        252"}),(0,s.jsx)(n.td,{children:"349        295"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"80"}),(0,s.jsx)(n.td,{children:"282        282"}),(0,s.jsx)(n.td,{children:"415        415"}),(0,s.jsx)(n.td,{children:"423        256"}),(0,s.jsx)(n.td,{children:"365        311"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"128"}),(0,s.jsx)(n.td,{children:"N/A        N/A"}),(0,s.jsx)(n.td,{children:"415        415"}),(0,s.jsx)(n.td,{children:"471        268"}),(0,s.jsx)(n.td,{children:"413        359"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"256"}),(0,s.jsx)(n.td,{children:"N/A        N/A"}),(0,s.jsx)(n.td,{children:"639        639"}),(0,s.jsx)(n.td,{children:"599        300"}),(0,s.jsx)(n.td,{children:"541        487"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1KB"}),(0,s.jsx)(n.td,{children:"N/A        N/A"}),(0,s.jsx)(n.td,{children:"1983       1983"}),(0,s.jsx)(n.td,{children:"1367       492"}),(0,s.jsx)(n.td,{children:"1309       1255"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"2KB"}),(0,s.jsx)(n.td,{children:"N/A        N/A"}),(0,s.jsx)(n.td,{children:"3775       3775"}),(0,s.jsx)(n.td,{children:"2391       748"}),(0,s.jsx)(n.td,{children:"2333       2279"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"efficiency-ratio-vbytes-per-byte-of-data",children:"Efficiency Ratio (vBytes per byte of data)"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Size"}),(0,s.jsx)(n.th,{children:"OP_RETURN"}),(0,s.jsx)(n.th,{children:"MULTISIG"}),(0,s.jsx)(n.th,{children:"P2TR"}),(0,s.jsx)(n.th,{children:"P2SH"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"10"}),(0,s.jsx)(n.td,{children:"21.20"}),(0,s.jsx)(n.td,{children:"30.30"}),(0,s.jsx)(n.td,{children:"23.90"}),(0,s.jsx)(n.td,{children:"24.10"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"16"}),(0,s.jsx)(n.td,{children:"13.63"}),(0,s.jsx)(n.td,{children:"18.94"}),(0,s.jsx)(n.td,{children:"15.00"}),(0,s.jsx)(n.td,{children:"15.44"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"32"}),(0,s.jsx)(n.td,{children:"7.31"}),(0,s.jsx)(n.td,{children:"9.47"}),(0,s.jsx)(n.td,{children:"7.63"}),(0,s.jsx)(n.td,{children:"8.22"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"64"}),(0,s.jsx)(n.td,{children:"4.16"}),(0,s.jsx)(n.td,{children:"4.73"}),(0,s.jsx)(n.td,{children:"3.94"}),(0,s.jsx)(n.td,{children:"4.61"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"80"}),(0,s.jsx)(n.td,{children:"3.52"}),(0,s.jsx)(n.td,{children:"5.19"}),(0,s.jsx)(n.td,{children:"3.20"}),(0,s.jsx)(n.td,{children:"3.89"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"128"}),(0,s.jsx)(n.td,{children:"N/A"}),(0,s.jsx)(n.td,{children:"3.24"}),(0,s.jsx)(n.td,{children:"2.09"}),(0,s.jsx)(n.td,{children:"2.80"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"256"}),(0,s.jsx)(n.td,{children:"N/A"}),(0,s.jsx)(n.td,{children:"2.50"}),(0,s.jsx)(n.td,{children:"1.17"}),(0,s.jsx)(n.td,{children:"1.90"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1KB"}),(0,s.jsx)(n.td,{children:"N/A"}),(0,s.jsx)(n.td,{children:"1.94"}),(0,s.jsx)(n.td,{children:"0.48"}),(0,s.jsx)(n.td,{children:"1.23"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"2KB"}),(0,s.jsx)(n.td,{children:"N/A"}),(0,s.jsx)(n.td,{children:"1.84"}),(0,s.jsx)(n.td,{children:"0.37"}),(0,s.jsx)(n.td,{children:"1.11"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"most-efficient-method-by-data-size",children:"Most Efficient Method by Data Size"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Size"}),(0,s.jsx)(n.th,{children:"Optimal Method"}),(0,s.jsx)(n.th,{children:"Efficiency (vBytes/byte)"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"10"}),(0,s.jsx)(n.td,{children:"OP_RETURN"}),(0,s.jsx)(n.td,{children:"21.20"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"16"}),(0,s.jsx)(n.td,{children:"OP_RETURN"}),(0,s.jsx)(n.td,{children:"13.63"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"32"}),(0,s.jsx)(n.td,{children:"OP_RETURN"}),(0,s.jsx)(n.td,{children:"7.31"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"64"}),(0,s.jsx)(n.td,{children:"P2TR"}),(0,s.jsx)(n.td,{children:"3.94"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"80"}),(0,s.jsx)(n.td,{children:"P2TR"}),(0,s.jsx)(n.td,{children:"3.20"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"128"}),(0,s.jsx)(n.td,{children:"P2TR"}),(0,s.jsx)(n.td,{children:"2.09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"256"}),(0,s.jsx)(n.td,{children:"P2TR"}),(0,s.jsx)(n.td,{children:"1.17"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1KB"}),(0,s.jsx)(n.td,{children:"P2TR"}),(0,s.jsx)(n.td,{children:"0.48"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"2KB"}),(0,s.jsx)(n.td,{children:"P2TR"}),(0,s.jsx)(n.td,{children:"0.37"})]})]})]})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var d=t(6540);const s={},i=d.createContext(s);function r(e){const n=d.useContext(i);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),d.createElement(i.Provider,{value:n},e.children)}}}]);